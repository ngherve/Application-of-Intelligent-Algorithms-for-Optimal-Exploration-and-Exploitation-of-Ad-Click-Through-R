package honours.smartads_agent.gui;

import java.awt.Dimension;

/**
 * 
 */

/**
 * @author HERVE NG
 * Graphical user interface Class for displaying stuff
 *
 */


import java.io.File;
import java.io.IOException;

import org.jfree.chart.ChartFactory;
import org.jfree.chart.ChartPanel;
import org.jfree.chart.ChartUtilities;
import org.jfree.chart.JFreeChart;
import org.jfree.chart.plot.PlotOrientation;
import org.jfree.data.category.DefaultCategoryDataset;
import org.jfree.ui.ApplicationFrame;
import org.jfree.ui.RefineryUtilities;

public class LineChart_Utilility extends ApplicationFrame{
	/**
	 * 
	 */
	private static final long serialVersionUID = 1L;
	private String appTitle;
	private String chartTitle;
	private DefaultCategoryDataset defDataset;

	/**
	 * @return the defDataset
	 */
	public DefaultCategoryDataset getDefDataset() {
		return defDataset;
	}

	/**
	 * @param defDataset the defDataset to set
	 */
	public void setDefDataset(DefaultCategoryDataset defDataset) {
		this.defDataset = defDataset;
	}

	public LineChart_Utilility(String appTitle, String chartTitle, DefaultCategoryDataset defDataset) {
		// TODO Auto-generated constructor stub
		super(appTitle);
		this.defDataset = defDataset;
		JFreeChart lineChart = ChartFactory.createLineChart(
		         chartTitle,
		         "Iterations","Average Rewards",
		         defDataset,
		         PlotOrientation.VERTICAL,
		         true,true,false);
		         
		ChartPanel chartPanel = new ChartPanel(lineChart);
		chartPanel.setPreferredSize(new Dimension(560, 367));
		setContentPane(chartPanel);
	}
	
	public void ViewChart() {
		this.pack( );
		RefineryUtilities.centerFrameOnScreen(this);
		this.setVisible(true);
		
		JFreeChart lineChartObject = ChartFactory.createLineChart(
							         "Average rewards per iteration for UCB", "Iterations",
							         "Average reward",
							         defDataset,
							         PlotOrientation.VERTICAL,
							         true,true,false);
		
		int width = 640;    /* Width of the image */
		int height = 480;   /* Height of the image */ 
		File lineChart = new File("data/LineChartAve.jpeg"); 
		try {
			ChartUtilities.saveChartAsJPEG(lineChart, lineChartObject, width, height);
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
	}

	/**
	 * @return the appTitle
	 */
	public String getAppTitle() {
		return appTitle;
	}

	/**
	 * @param appTitle the appTitle to set
	 */
	public void setAppTitle(String appTitle) {
		this.appTitle = appTitle;
	}

	/**
	 * @return the chartTitle
	 */
	public String getChartTitle() {
		return chartTitle;
	}

	/**
	 * @param chartTitle the chartTitle to set
	 */
	public void setChartTitle(String chartTitle) {
		this.chartTitle = chartTitle;
	}
	
}
